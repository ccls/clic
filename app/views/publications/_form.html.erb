<% form_for(@publication, :html => { :multipart => true }) do |f| %>
 <%= f.error_messages %>
 <%= f.wrapped_text_field :title, :class => 'autosize' %>
 <%= f.wrapped_text_field :author_last_name, :class => 'autosize',
	:label_text => "First Author's Last Name" %>
 <%= f.wrapped_text_field :journal, :class => 'autosize' %>

<%# TODO publication_year will now be an integer %>
 <%= f.wrapped_text_field :publication_year, :class => 'autosize' %>
 <%= f.wrapped_collection_select( :publication_subject_id, PublicationSubject.all,
  :id, :to_s, :include_blank => true) %>
 <%= f.wrapped_text_field :other_publication_subject, :class => 'autosize',
  :label_text => 'Other publication subject (required if publication subject is other)' %>
 <%= f.wrapped_collection_select( :study_id, Study.all,
  :id, :to_s, :include_blank => true) %>

 <% @publication.group_documents.build if @publication.group_documents.empty? %>
 <%= render :partial => 'group_documents/group_documents',
  :locals => { :f => f } %>

 <p>
  <%= f.submit_link_to( ((@publication.new_record?)?'Create':'Update')<<" Publication" ) %>
  <% unless( @publication.new_record? ) %>
    <%= link_to 'Cancel and Show This Publication', @publication, :class => 'button' %>
  <% end %>
  <%= link_to 'Cancel and Show All Publications', publications_path, :class => 'button' %>
 </p>
<% end %>
